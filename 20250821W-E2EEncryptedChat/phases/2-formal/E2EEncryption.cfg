\* TLA+ Model Configuration for E2E Encryption
\* E2E暗号化チャットアプリケーション モデル検査設定

SPECIFICATION Spec

\* 定数の定義
CONSTANTS
    Users = {alice, bob, charlie}
    Messages = {msg1, msg2, msg3, msg4, msg5}
    MaxKeys = 10

\* 不変条件 (Invariants)
INVARIANTS
    KeyPairUniqueness
    MessageEncryption
    NoMessageWithoutKeyExchange
    DecryptionAuthorization
    MessageIdUniqueness
    EncryptionSafety
    SenderAuthentication
    TypeInvariant
    FinitenesConstraint

\* 活性・安全性特性 (Properties)
PROPERTIES
    EventualKeyGeneration
    EventualMessageDelivery
    MessageIntegrity

\* 状態制約（メモリ制限対応）
CONSTRAINT
    /\ Cardinality(sentMessages) <= 8
    /\ Cardinality(receivedMessages) <= 8
    /\ Cardinality(keyExchanges) <= 6

\* モデル検査設定
\* - 最大探索深度: 12
\* - ワーカー数: 4
\* - チェックポイント: 有効